# Chap04 - 연산자(기본)



연산자(operator)는 메모리가 아닌 CPU연산과 관련되는 문법이다. 

- **연산자** : 덧셈(`+`), 곱셈(`*`), 나눗셈(`/`) 등을 연산자라 한다.
- **피연산자** : `3 + 4`  에서 `3, 4` 를 덧셈(`+`) 연산자의 피연산자라 한다.



## 4.1 산술 연산자

산술 연산자는 우리가 기본적으로 알고 있는 수학 식을 C언어로 그대로 옮긴 문법이라 할 수 있다. 여기서 하나 알고 넘어가야할 중요한 개념은 **연산의 임시결과** 이다. 

연산의 임시결과는 산술연산이 여러개가 있을 경우, 우선순위가 나중에 수행될 연산의 피연산자 중 먼저 연산된 결과를 말한다. 예를 들어 `(a + b) * c` 의 계산식에서 `(a + b)` 의 임시결과가 `*`의 피연산자가 된다.



### 4.1.1 덧셈, 뺄셈 연산자

```c
// operator.c
#include <stdio.h>

int main(void){
    int nResult = 0;

    // 1. 3 + 4
    // 2. 7(임시결과) - 5
    // 3. nResult = 2
    nResult = 3 + 4 - 5;
    printf("nResult : %d\n", nResult);
    return 0;
}
```

위의 코드에서 `3 + 4` 는 덧셈연산의 임시결과가 된다. 그리고 이 임시결과에서 `5`를 빼주어 `2`라는 임시결과를 얻게된다. 그 다음 더이상 이어지는 연산이 없기 때문에 최종결과인 `2`가 출력된다.



### 4.1.2 이형자료 간의 연산 및 형승격

이형자료 간의 연산에 대해 알아보자. 먼저 소스코드를 보도록 하자.

```c
// TypePromotion.c
#include <stdio.h>

int main(void){
    char ch = 'A';

    // char를 %c로 출력
    printf("%c\n", ch);

    // 'char + int'는 int 형식이다.
    printf("%c\n", ch + 1);
    printf("%d\n", ch + 1);
    printf("%c\n", 'A' + 2);

    // 'double + int'는 double 형식이다.
    // 따라서 %d 형식으로 출력할 수 없음
    printf("%d\n", 5.0 + 2);
    printf("%f\n", 5.0 + 2);
    return 0;
}

/*
출력결과
    A
    B
    66
    C
    0
    7.000000
*/
```



위의 코드에서 `ch + 1` 과 `'A'+2`와 같이 서로 다른 자료형의 연산을 이형자료 간의 연산이라고 한다.  앞의 연산에 대한 임시결과의 자료형은 `int`형이 된다. 

이렇듯, **임시결과의 자료형은 연산에 참여한 피연산자 중 정보 표현 범위가 더 넓은 자료형** 이 된다. `char=1byte` 이고 `int=4byte` 이므로 `char`와 `int`간의 연산은 `int`형이 된다. 

위의 코드에서 `5.0 + 2`의 (임시)결과의 자료형은 `double + int` 이므로 표현범위가 더 넓은 `double`이 되어 `printf("%d\n", 5.0 + 2);`에서 형식문자 `%d`가 `int`를 출력하기 때문에 `0`이 출력된다.

이처럼 연산의 결과가 피연산자의 자료형보다 표현범위가 넓은 형식으로 변경되는 현상을 **형승격(type promotion)** 이라 한다. 



### 4.1.3 곱셈, 나눗셈 연산자

```c
// opdoubleint.c
#include <stdio.h>

int main(void){
    
    int x = 10;

    // int * int -> %d
    printf("x * 10 = %d\n", x * 10);
    // int * double -> %d (출력 불가능)
    printf("x * 10.0 = %d\n", x * 10.0);

    // int / int는 int 형식이다. 
    // 실수 형식이 아니라는 점에 주의!
    // 단, 소수점 이하는 절사된다.
    printf("x / 10 = %d\n", x / 10);

    // int / int는 int 형식이므로 %f 로 출력할 수 없다.
    printf("(int) : 5 / 2 = %d\n", 5 / 2);
    // 소수점 이하가 절사되므로 사실상 정수 2를 %f로 출력하는 것이다.
    printf("(double) : 5 / 2 = %f\n", 5 / 2);

    // double / int double 형식이다.
    printf("5.0 / 2 = %f\n", 5.0 / 2);
    return 0;
}

/*
출력결과
    x * 10 = 100
    x * 10.0 = 0
    x / 10 = 1
    (int) : 5 / 2 = 2
    (double) : 5 / 2 = 100.000000
    5.0 / 2 = 2.500000
*/
```



곱셈, 나눗셈 연산 또한 형승격(type promotion)이 일어난다.  

나눗넴 연산은 다음 두 가지에 대해 알고 있어야 한다.

- **정수(`int`)를 정수(`int`)로 나눈 결과는 정수**
- **절대 `0`으로 나눌 수 없음**



### 4.1.4 나머지 연산자

나머지 연산자는 나눗셈과 원리가 같으나, 몫이 아닌 나머지를 구한다. 나머지 연산자 기호는 `%`이다. 나머지 연산자의 피연산자로 **실수가 사용될 수 없다.**

```c
// operator04.c
#include <stdio.h>

int main(void){

    int x = 0;
    scanf("%d", &x);

    // int / int는 int 이므로 
    // 소수점 이하는 버려지고 출력된다.
    printf("몫 : %d\n", x / 3);
    // 몫은 버리고 나머지(int)만 출력한다.
    printf("나머지 : %d\n", x % 3);
    
    return 0;
}
```



